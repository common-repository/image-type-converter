!function(e){let a=window.gpls_core_settings_actions,t=a.prefix;function s(t){let s;c(t,{action:a.actions.search_woo_products,nonce:a.nonces.settings_nonce},function(a){let t=[];return e.each(a,function(e,a){t.push({id:a.id,text:a.title})}),{results:t}},"POST",!1)}function l(t,s){let l;c(t,{action:a.actions.search_woo_taxs,taxonomy:s,security:a.nonces.search_woo_taxs_nonce},function(a){let t=[];return e.each(a,function(e,a){t.push({id:a.term_id,text:a.name})}),{results:t}},"GET",!1)}function c(e,t,s,l="POST",c=!0){let n={log:!0,width:"100%",termName:"term",placeholder:a.labels.search,ajaxUrl:a.ajaxUrl,ajaxData:t};if(e.hasClass("select2-hidden-accessible")){if(!c)return;e.val(null).trigger("change"),e.select2("destroy")}e.select2({placeholder:n.placeholder||"",width:n.width||"400px",cache:n.cache||!0,ajax:{method:l,url:n.ajaxUrl,dataType:n.dataType||"json",delay:n.delay||250,allowClear:!0,data(e){n.log&&console.log("checking params",e);let a=n.ajaxData;return a[n.termName||"search"]=e.term,a},processResults:e=>s(e),cache:n.cache||!0},minimumInputLength:n.minimumInputLength||3})}e(function(n){let o;(o=e("[data-collapse-source]")).length&&o.each(function(a,t){let s=e(t),l=s.data("collapse-source"),c=s.data("collapse-value"),n=e("."+l+":checked").val();c==n?s.addClass("show"):s.removeClass("show"),e("."+l).on("change",a=>{c==(n=e(a.target).val())?s.addClass("show"):s.removeClass("show")})}),e(document).on("click",".repeater-item .btn-close",t=>{let s=e(t.target);window.confirm(a.labels.remove_item)&&s.closest(".repeater-item").hide("slow").remove()}),e("."+t+"-add-rule-group").on("click",t=>{var s,l,c,n,o;t.preventDefault();let r=e(t.target),d=r.data("key"),i=parseInt(r.data("count")),u=r.data("target"),h=r.data("action"),p;s=d,l=i,c=r,n=u,o=h,p=c.siblings(".add-repeater-field-item-loader"),c.addClass("disabled"),p.removeClass("hidden"),jQuery.ajax({method:"POST",url:a.ajaxUrl,data:{action:o,nonce:a.nonces.settings_nonce,key:s,index:l},success(t){c.removeClass("disabled"),p.addClass("hidden"),e("."+n).append(t.data.result.rule_group),c.data("count",parseInt(l)+1),e(document).trigger(a.actions.repeater_item_added,[l,s,n])},error(e){c.removeClass("disabled"),p.addClass("hidden")}})}),e(".select2-input").each((a,t)=>{c(e(t))}),e(".select2-input-wooproducts").each((a,t)=>{s(e(t))}),e(".select2-input-wootaxs").each((a,t)=>{let s=e(t),c=s.data("tax");l(s,c)}),e(document).on(a.actions.repeater_item_added,(a,t,c,n)=>{e("#repeater-item-"+c+"-"+t).find(".select2-input-wooproducts").each((a,t)=>{s(e(t))}),e("#repeater-item-"+c+"-"+t).find(".select2-input-wootaxs").each((a,t)=>{let s=e(t),c=s.data("tax");l(s,c)})})})}(jQuery);
